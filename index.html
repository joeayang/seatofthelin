<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è³“å®¢åº§ä½æŸ¥è©¢ç³»çµ±</title>
    <style>
        :root { --main-red: #a4161a; --gold: #ba9411; --light-bg: #fff5f5; }
        body { font-family: "Microsoft JhengHei", "PingFang TC", sans-serif; background-color: var(--light-bg); display: flex; justify-content: center; padding: 20px; color: #333; }
        .card { background: white; width: 100%; max-width: 500px; padding: 25px; border-radius: 15px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); border-top: 8px solid var(--main-red); }
        h2 { text-align: center; color: var(--main-red); margin-bottom: 25px; }
        
        .search-box { position: relative; margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: var(--main-red); }
        input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px; }

        /* è‡ªå‹•ç´¢å¼•ä¸‹æ‹‰é¸å–® */
        .suggestion-list {
            position: absolute; width: 100%; background: white; border: 1px solid #ddd;
            z-index: 100; max-height: 200px; overflow-y: auto; box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-radius: 0 0 8px 8px;
        }
        .suggestion-item { padding: 12px; cursor: pointer; border-bottom: 1px solid #f9f9f9; }
        .suggestion-item:hover { background-color: #fff0f0; color: var(--main-red); }

        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { background-color: var(--main-red); color: white; padding: 10px; }
        td { padding: 10px; border-bottom: 1px solid #eee; text-align: center; }
        .no-data { text-align: center; color: #888; margin-top: 20px; }
    </style>
</head>
<body>

<div class="card">
    <h2>ğŸŒ¸ è³“å®¢æŸ¥è©¢ç³»çµ± ğŸŒ¸</h2>

    <div class="search-box">
        <label>ğŸ‘¤ è¼¸å…¥å§“å (è‡ªå‹•ç´¢å¼•)ï¼š</label>
        <input type="text" id="nameInput" placeholder="ä¾‹å¦‚ï¼šè˜‡" autocomplete="off">
        <div id="nameSuggestionBox" class="suggestion-list" style="display:none;"></div>
    </div>

    <div class="search-box">
        <label>ğŸ“ è¼¸å…¥æ¡Œæ¬¡ (è‡ªå‹•ç´¢å¼•)ï¼š</label>
        <input type="text" id="tableInput" placeholder="ä¾‹å¦‚ï¼šä¸» æˆ– 11" autocomplete="off">
        <div id="tableSuggestionBox" class="suggestion-list" style="display:none;"></div>
    </div>

    <div id="resultArea">
        <table id="resultTable" style="display:none;">
            <thead>
                <tr>
                    <th>å§“å</th>
                    <th>æ¡Œæ¬¡</th>
                    <th>èƒ¸èŠ±</th>
                </tr>
            </thead>
            <tbody id="resultBody"></tbody>
        </table>
        <div id="infoMsg" class="no-data">è«‹è¼¸å…¥è³‡è¨Šé€²è¡ŒæŸ¥è©¢</div>
    </div>
</div>

<script>
    // --- è«‹å°‡ä½ çš„ JSON è³‡æ–™è²¼åœ¨ä¸‹æ–¹æ‹¬è™Ÿå…§ ---
    const rawData = [
    
];

    // è³‡æ–™é è™•ç†
    const guestData = rawData.map(item => ({
        å§“å: item.å§“å ? String(item.å§“å).trim() : "",
        æ¡Œæ¬¡: item.æ¡Œæ¬¡ ? String(item.æ¡Œæ¬¡).trim() : "",
        èƒ¸èŠ±: (item.èƒ¸èŠ± && String(item.èƒ¸èŠ±) !== "NaN") ? String(item.èƒ¸èŠ±) : ""
    })).filter(item => item.å§“å !== "");

    const nameInput = document.getElementById('nameInput');
    const tableInput = document.getElementById('tableInput');
    const nameSuggestionBox = document.getElementById('nameSuggestionBox');
    const tableSuggestionBox = document.getElementById('tableSuggestionBox');
    const resultTable = document.getElementById('resultTable');
    const resultBody = document.getElementById('resultBody');
    const infoMsg = document.getElementById('infoMsg');

    // 1. å§“åè¼¸å…¥äº‹ä»¶ (å«è‡ªå‹•ç´¢å¼•)
    nameInput.addEventListener('input', function() {
        const val = this.value.trim();
        closeAllSuggestions();
        if (!val) return hideTable("è«‹è¼¸å…¥è³‡è¨Šé€²è¡ŒæŸ¥è©¢");

        const matches = guestData.filter(g => g.å§“å.includes(val));
        if (matches.length > 0) {
            nameSuggestionBox.style.display = 'block';
            matches.forEach(item => {
                const div = document.createElement('div');
                div.className = 'suggestion-item';
                div.textContent = item.å§“å;
                div.onclick = () => {
                    nameInput.value = item.å§“å;
                    tableInput.value = ''; 
                    closeAllSuggestions();
                    renderTable([item]);
                };
                nameSuggestionBox.appendChild(div);
            });
            renderTable(matches);
        } else {
            hideTable("æŸ¥ç„¡æ­¤å§“å");
        }
    });

    // 2. æ¡Œæ¬¡è¼¸å…¥äº‹ä»¶ (æ–°å¢è‡ªå‹•ç´¢å¼•)
    tableInput.addEventListener('input', function() {
        const val = this.value.trim();
        closeAllSuggestions();
        if (!val) return hideTable("è«‹è¼¸å…¥è³‡è¨Šé€²è¡ŒæŸ¥è©¢");

        // å–å¾—ä¸é‡è¤‡çš„æ¡Œæ¬¡æ¸…å–®é€²è¡Œæª¢ç´¢
        const allTables = [...new Set(guestData.map(g => g.æ¡Œæ¬¡))];
        const matchedTables = allTables.filter(t => t.includes(val));

        if (matchedTables.length > 0) {
            tableSuggestionBox.style.display = 'block';
            matchedTables.forEach(tName => {
                const div = document.createElement('div');
                div.className = 'suggestion-item';
                div.textContent = tName;
                div.onclick = () => {
                    tableInput.value = tName;
                    nameInput.value = '';
                    closeAllSuggestions();
                    const tableMembers = guestData.filter(g => g.æ¡Œæ¬¡ === tName);
                    renderTable(tableMembers);
                };
                tableSuggestionBox.appendChild(div);
            });
            // å³æ™‚é è¦½æ‰€æœ‰ç¬¦åˆæ¡Œæ¬¡çš„è³“å®¢
            const tableMatches = guestData.filter(g => g.æ¡Œæ¬¡.includes(val));
            renderTable(tableMatches);
        } else {
            hideTable("æŸ¥ç„¡æ­¤æ¡Œæ¬¡");
        }
    });

    function renderTable(data) {
        resultBody.innerHTML = '';
        if (data && data.length > 0) {
            resultTable.style.display = 'table';
            infoMsg.style.display = 'none';
            data.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `<td>${item.å§“å}</td><td>${item.æ¡Œæ¬¡}</td><td>${item.èƒ¸èŠ±}</td>`;
                resultBody.appendChild(tr);
            });
        } else {
            hideTable("æŸ¥ç„¡è³‡æ–™");
        }
    }

    function hideTable(msg) {
        resultTable.style.display = 'none';
        infoMsg.style.display = 'block';
        infoMsg.textContent = msg;
    }

    function closeAllSuggestions() {
        nameSuggestionBox.innerHTML = '';
        nameSuggestionBox.style.display = 'none';
        tableSuggestionBox.innerHTML = '';
        tableSuggestionBox.style.display = 'none';
    }

    document.addEventListener('click', (e) => {
        if (e.target !== nameInput && e.target !== tableInput) closeAllSuggestions();
    });
</script>

</body>
</html>